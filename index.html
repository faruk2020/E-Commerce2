<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chorki</title>
    <!-- Add Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <style>
      /* Your existing CSS remains exactly the same */
      /* Global Styles */
      :root {
        --primary-color: #f8d56b;
        --secondary-color: #2c3e50;
        --light-color: #f9f9f9;
        --dark-color: #333;
        --success-color: #4caf50;
        --danger-color: #f44336;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: poppins;
      }

      body {
        background-color: #fff;
        color: var(--dark-color);
        line-height: 1.6;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header Styles */
      header {
        background-color: var(--light-color);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .header-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
      }

      .logo {
        font-size: 28px;
        font-weight: bold;
        color: var(--secondary-color);
        text-decoration: none;
      }

      .logo span {
        color: var(--primary-color);
      }

      .nav-links {
        display: flex;
        list-style: none;
      }

      .nav-links li {
        margin-left: 30px;
      }

      .nav-links a {
        text-decoration: none;
        color: var(--dark-color);
        font-weight: 500;
        transition: color 0.3s;
      }

      .nav-links a:hover {
        color: var(--primary-color);
      }

      .cart-icon {
        position: relative;
        cursor: pointer;
      }

      .cart-count {
        position: absolute;
        top: -10px;
        right: -10px;
        background-color: var(--primary-color);
        color: var(--secondary-color);
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 12px;
        font-weight: bold;
      }

      /* Hero Section */
      .hero {
        background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)),
          url("https://images.unsplash.com/photo-1516455590571-18256e5bb9ff?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80")
            no-repeat center center/cover;
        height: 400px;
        display: flex;
        align-items: center;
        text-align: center;
        color: white;
      }

      .hero-content {
        max-width: 800px;
        margin: 0 auto;
      }

      .hero h1 {
        font-size: 48px;
        margin-bottom: 20px;
      }

      .hero p {
        font-size: 20px;
        margin-bottom: 30px;
      }

      .btn {
        display: inline-block;
        background-color: var(--primary-color);
        color: var(--secondary-color);
        padding: 12px 30px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        text-decoration: none;
        transition: all 0.3s;
      }

      .btn:hover {
        background-color: #ffd700;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      /* Products Section */
      .products {
        padding: 80px 0;
      }

      .section-title {
        text-align: center;
        margin-bottom: 50px;
        font-size: 36px;
        color: var(--secondary-color);
      }

      .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
      }

      .product-card {
        background-color: var(--light-color);
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s, box-shadow 0.3s;
      }

      .product-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
      }

      .product-image {
        height: 250px;
        overflow: hidden;
      }

      .product-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
      }

      .product-card:hover .product-image img {
        transform: scale(1.1);
      }

      .product-info {
        padding: 20px;
      }

      .product-name {
        font-size: 20px;
        margin-bottom: 10px;
        color: var(--secondary-color);
      }

      .product-price {
        font-size: 18px;
        font-weight: bold;
        color: var(--primary-color);
        margin-bottom: 15px;
      }

      .product-description {
        margin-bottom: 20px;
        color: #666;
      }

      .btn-view {
        background-color: var(--secondary-color);
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        transition: background-color 0.3s;
      }

      .btn-view:hover {
        background-color: #1a252f;
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        overflow-y: auto;
      }

      .modal-content {
        background-color: white;
        margin: 50px auto;
        max-width: 440px;
        border-radius: 10px;
        overflow: hidden;
        animation: modalopen 0.5s;
      }

      @keyframes modalopen {
        from {
          opacity: 0;
          transform: translateY(-50px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        background-color: var(--light-color);
      }

      .modal-title {
        font-size: 24px;
        color: var(--secondary-color);
      }

      .close-modal {
        font-size: 30px;
        cursor: pointer;
        color: var(--dark-color);
        transition: color 0.3s;
      }

      .close-modal:hover {
        color: var(--danger-color);
      }

      .modal-body {
        padding: 20px;
        display: flex;
        flex-direction: column;
      }

      .product-slider {
        position: relative;
        margin-bottom: 20px;
      }

      .slider-container {
        display: flex;
        border-radius: 5px;
      }

      .slider-image {
        min-width: 100%;
        height: 400px;
        object-fit: cover;
        transition: transform 0.5s;
      }

      .slider-nav {
        display: flex;
        justify-content: center;
        margin-top: 10px;
      }

      .slider-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background-color: #ccc;
        margin: 0 5px;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .slider-dot.active {
        background-color: var(--primary-color);
      }

      .slider-arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background-color: rgba(0, 0, 0, 0.5);
        color: white;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        font-size: 20px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 10;
        transition: background-color 0.3s;
      }

      .slider-arrow:hover {
        background-color: rgba(0, 0, 0, 0.8);
      }

      .slider-prev {
        left: 10px;
      }

      .slider-next {
        right: 10px;
      }

      .modal-product-info {
        margin-bottom: 20px;
      }

      .modal-product-price {
        font-size: 24px;
        font-weight: bold;
        color: var(--primary-color);
        margin: 10px 0;
      }

      .btn-add-to-cart {
        background-color: var(--success-color);
        color: white;
        padding: 12px 30px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        transition: background-color 0.3s;
        align-self: flex-start;
      }

      .btn-add-to-cart:hover {
        background-color: #45a049;
      }

      /* Cart Modal */
      .cart-modal {
        display: none;
        position: fixed;
        top: 0;
        right: 0;
        width: 400px;
        height: 100%;
        background-color: white;
        box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        overflow-y: auto;
        animation: slideIn 0.3s;
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
        }

        to {
          transform: translateX(0);
        }
      }

      .cart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        background-color: var(--light-color);
        border-bottom: 1px solid #eee;
      }

      .cart-title {
        font-size: 20px;
        color: var(--secondary-color);
      }

      .close-cart {
        font-size: 24px;
        cursor: pointer;
        color: var(--dark-color);
        transition: color 0.3s;
      }

      .close-cart:hover {
        color: var(--danger-color);
      }

      .cart-body {
        padding: 20px;
      }

      .cart-items {
        margin-bottom: 20px;
      }

      .cart-item {
        display: flex;
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid #eee;
      }

      .cart-item-image {
        width: 80px;
        height: 80px;
        object-fit: cover;
        border-radius: 5px;
        margin-right: 15px;
      }

      .cart-item-details {
        flex: 1;
      }

      .cart-item-name {
        font-size: 16px;
        margin-bottom: 5px;
        color: var(--secondary-color);
      }

      .cart-item-price {
        font-size: 14px;
        color: var(--primary-color);
        margin-bottom: 5px;
      }

      .cart-item-quantity {
        display: flex;
        align-items: center;
      }

      .quantity-btn {
        width: 25px;
        height: 25px;
        background-color: #eee;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .quantity-input {
        width: 40px;
        text-align: center;
        margin: 0 5px;
        border: 1px solid #ddd;
        border-radius: 3px;
        padding: 3px;
      }

      .remove-item {
        color: var(--danger-color);
        cursor: pointer;
        font-size: 14px;
        margin-top: 5px;
      }

      .cart-total {
        display: flex;
        justify-content: space-between;
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 20px;
        padding-top: 10px;
        border-top: 1px solid #eee;
      }

      .btn-checkout {
        width: 100%;
        background-color: var(--primary-color);
        color: var(--secondary-color);
        padding: 12px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        transition: background-color 0.3s;
      }

      .btn-checkout:hover {
        background-color: #ffd700;
      }

      /* Checkout Form */
      .checkout-form {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        overflow-y: auto;
      }

      .checkout-content {
        background-color: white;
        margin: 50px auto;
        max-width: 600px;
        border-radius: 10px;
        overflow: hidden;
        animation: modalopen 0.5s;
      }

      .checkout-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        background-color: var(--light-color);
      }

      .checkout-title {
        font-size: 24px;
        color: var(--secondary-color);
      }

      .close-checkout {
        font-size: 30px;
        cursor: pointer;
        color: var(--dark-color);
        transition: color 0.3s;
      }

      .close-checkout:hover {
        color: var(--danger-color);
      }

      .checkout-body {
        padding: 20px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
      }

      .form-input {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 16px;
      }

      .payment-option {
        margin-bottom: 15px;
      }

      .payment-label {
        margin-left: 10px;
      }

      .btn-submit-order {
        width: 100%;
        background-color: var(--success-color);
        color: white;
        padding: 12px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        transition: background-color 0.3s;
      }

      .btn-submit-order:hover {
        background-color: #45a049;
      }

      /* Order Confirmation */
      .order-confirmation {
        display: none;
        text-align: center;
        padding: 40px 20px;
      }

      .confirmation-icon {
        font-size: 60px;
        color: var(--success-color);
        margin-bottom: 20px;
      }

      .confirmation-title {
        font-size: 28px;
        margin-bottom: 15px;
        color: var(--secondary-color);
      }

      .confirmation-message {
        font-size: 16px;
        margin-bottom: 30px;
        color: #666;
      }

      /* Admin Panel */
      .admin-panel {
        background-color: var(--secondary-color);
        color: white;
        padding: 20px 0;
        margin-top: 50px;
      }

      .admin-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .admin-login-btn {
        background-color: var(--primary-color);
        color: var(--secondary-color);
        padding: 8px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.3s;
      }

      .admin-login-btn:hover {
        background-color: #ffd700;
      }

      .copyright {
        font-size: 14px;
      }

      /* Admin Login Modal */
      .admin-login-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 1000;
      }

      .admin-login-content {
        background-color: white;
        margin: 100px auto;
        max-width: 400px;
        border-radius: 10px;
        overflow: hidden;
        animation: modalopen 0.5s;
      }

      .admin-login-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        background-color: var(--secondary-color);
        color: white;
      }

      .admin-login-title {
        font-size: 20px;
      }

      .close-admin-login {
        font-size: 24px;
        cursor: pointer;
        transition: color 0.3s;
      }

      .close-admin-login:hover {
        color: var(--primary-color);
      }

      .admin-login-body {
        padding: 20px;
      }

      .admin-login-form .form-group {
        margin-bottom: 20px;
      }

      .btn-admin-login {
        width: 100%;
        background-color: var(--secondary-color);
        color: white;
        padding: 12px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        transition: background-color 0.3s;
      }

      .btn-admin-login:hover {
        background-color: #1a252f;
      }

      /* Admin Dashboard */
      .admin-dashboard {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: white;
        z-index: 1000;
        overflow-y: auto;
      }

      .admin-dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        background-color: var(--secondary-color);
        color: white;
      }

      .admin-dashboard-title {
        font-size: 24px;
      }

      .close-admin-dashboard {
        font-size: 30px;
        cursor: pointer;
        transition: color 0.3s;
      }

      .close-admin-dashboard:hover {
        color: var(--primary-color);
      }

      .admin-dashboard-body {
        padding: 20px;
      }

      .orders-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }

      .orders-table th,
      .orders-table td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #ddd;
      }

      .orders-table th {
        background-color: var(--light-color);
        font-weight: bold;
      }

      .orders-table tr:hover {
        background-color: #f5f5f5;
      }

      .no-orders {
        text-align: center;
        padding: 40px;
        color: #666;
      }

      /* Add this new style */
.product-price, .modal-product-price, .cart-item-price, .cart-total {
    letter-spacing: 0.5px;
}

      /* Footer */
      footer {
        background-color: var(--dark-color);
        color: white;
        text-align: center;
        padding: 20px 0;
        margin-top: 50px;
      }

      /* Responsive Styles */
      @media (max-width: 768px) {
        .header-container {
          flex-direction: column;
          padding: 15px 0;
        }

        .logo {
          margin-bottom: 15px;
        }

        .nav-links {
          margin-top: 15px;
        }

        .nav-links li {
          margin-left: 15px;
        }

        .hero {
          height: 300px;
        }

        .hero h1 {
          font-size: 36px;
        }

        .hero p {
          font-size: 18px;
        }

        .modal-content,
        .checkout-content {
          width: 90%;
        }

        .cart-modal {
          width: 90%;
        }

        .admin-login-content {
          width: 90%;
        }
      }

      @media (max-width: 480px) {
        .nav-links {
          flex-direction: column;
          align-items: center;
        }

        .nav-links li {
          margin: 5px 0;
        }

        .hero h1 {
          font-size: 28px;
        }

        .slider-image {
          height: 250px;
        }

        .product-slider {
          margin-bottom: 10px;
        }

        .modal-body {
          padding: 15px;
        }

        .orders-table th,
        .orders-table td {
          padding: 8px;
          font-size: 14px;
        }
      }
    </style>
  </head>

  <body>
    <!-- Header -->
    <header>
      <div class="container header-container">
        <a href="#" class="logo"
          ><img
            src="riyad_logo-01.png"
            alt="logo"
            style="width: 100%; height: 35px"
        /></a>
        <ul class="nav-links">
          <li><a href="#">Home</a></li>
          <li><a href="#">Products</a></li>
          <li><a href="#">About</a></li>
          <li><a href="#">Contact</a></li>
          <li>
            <div class="cart-icon" id="cartIcon" style="
    width: 120px;
    height: 25px;
    background: #f3b61f;
    text-align: center;
    border-radius: 5%;
">
              Your Cart ðŸ›’
              <span class="cart-count" id="cartCount">0</span>
            </div>
          </li>
        </ul>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-content">
        <h1>Brighten Every Moment</h1>
        <p>
          Explore lights that match your mood, style, and space.
        </p>
        <a href="#products" class="btn">Shop Now</a>
      </div>
    </section>

    <!-- Products Section -->
    <section class="products" id="products">
      <div class="container">
        <h2 class="section-title">Our Featured Products</h2>
        <div class="products-grid" id="productsGrid">
          <!-- Products will be added dynamically with JavaScript -->
        </div>
      </div>
    </section>

    <!-- Product Modal -->
    <div class="modal" id="productModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Product Details</h3>
          <span class="close-modal" id="closeModal">&times;</span>
        </div>
        <div class="modal-body" id="modalBody">
          <!-- Modal content will be added dynamically with JavaScript -->
        </div>
      </div>
    </div>

    <!-- Cart Modal -->
    <div class="cart-modal" id="cartModal">
      <div class="cart-header">
        <h3 class="cart-title">Your Shopping Cart</h3>
        <span class="close-cart" id="closeCart">&times;</span>
      </div>
      <div class="cart-body">
        <div class="cart-items" id="cartItems">
          <!-- Cart items will be added dynamically with JavaScript -->
        </div>
        <div class="cart-total">
          <span>Total:</span>
          <span id="cartTotal">$0.00</span>
        </div>
        <button class="btn-checkout" id="btnCheckout">
          Proceed to Checkout
        </button>
      </div>
    </div>

    <!-- Checkout Form -->
    <div class="checkout-form" id="checkoutForm">
      <div class="checkout-content">
        <div class="checkout-header">
          <h3 class="checkout-title">Checkout</h3>
          <span class="close-checkout" id="closeCheckout">&times;</span>
        </div>
        <div class="checkout-body" id="checkoutBody">
          <form id="orderForm">
            <div class="form-group">
              <label for="name" class="form-label">Full Name</label>
              <input type="text" id="name" class="form-input" required />
            </div>
            <div class="form-group">
              <label for="address" class="form-label">Address</label>
              <input type="text" id="address" class="form-input" required />
            </div>
            <div class="form-group">
              <label for="phone" class="form-label">Phone Number</label>
              <input type="tel" id="phone" class="form-input" required />
            </div>
            <div class="form-group">
              <label class="form-label">Payment Method</label>
              <div class="payment-option">
                <input
                  type="radio"
                  id="cod"
                  name="payment"
                  value="Cash on Delivery"
                  checked
                />
                <label for="cod" class="payment-label">Cash on Delivery</label>
              </div>
            </div>
            <button type="submit" class="btn-submit-order">Place Order</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Order Confirmation -->
    <div class="order-confirmation" id="orderConfirmation">
      <div class="confirmation-icon">âœ“</div>
      <h3 class="confirmation-title">Order Confirmed!</h3>
      <p class="confirmation-message">
        Thank you for your purchase. Your order has been placed successfully.
      </p>
      <button class="btn" id="continueShopping">Continue Shopping</button>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel">
      <div class="container admin-container">
        <div class="copyright">Â© 2025 Chorki. All rights reserved.</div>
        <button class="admin-login-btn" id="adminLoginBtn">Admin Panel</button>
      </div>
    </div>

    <!-- Admin Login Modal -->
    <div class="admin-login-modal" id="adminLoginModal">
      <div class="admin-login-content">
        <div class="admin-login-header">
          <h3 class="admin-login-title">Admin Login</h3>
          <span class="close-admin-login" id="closeAdminLogin">&times;</span>
        </div>
        <div class="admin-login-body">
          <form class="admin-login-form" id="adminLoginForm">
            <div class="form-group">
              <label for="adminUsername" class="form-label">Username</label>
              <input
                type="text"
                id="adminUsername"
                class="form-input"
                required
              />
            </div>
            <div class="form-group">
              <label for="adminPassword" class="form-label">Password</label>
              <input
                type="password"
                id="adminPassword"
                class="form-input"
                required
              />
            </div>
            <button type="submit" class="btn-admin-login">Login</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Admin Dashboard -->
    <div class="admin-dashboard" id="adminDashboard">
      <div class="admin-dashboard-header">
        <h3 class="admin-dashboard-title">Admin Dashboard - Orders</h3>
        <span class="close-admin-dashboard" id="closeAdminDashboard"
          >&times;</span
        >
      </div>
      <div class="admin-dashboard-body">
        <div id="ordersTableContainer">
          <!-- Orders table will be added dynamically with JavaScript -->
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <div class="container">
        <p>Chorki - Lighting Solutions for Every Space</p>
      </div>
    </footer>
<script>
  // Firebase Configuration and Initialization
  const firebaseConfig = {
    apiKey: "AIzaSyAK52h7QPfh7Y3UTBxwnsBKrB-EG6fhvA0",
    authDomain: "chorki-16848.firebaseapp.com",
    projectId: "chorki-16848",
    storageBucket: "chorki-16848.appspot.com",
    messagingSenderId: "975672326438",
    appId: "1:975672326438:web:56c332d14ab8f7315729e7",
    measurementId: "G-MYDLZW1JG8"
  };

  // Initialize Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const analytics = firebase.analytics();

  // Enable Firestore persistence
  db.enablePersistence()
    .catch((err) => {
      console.log("Firestore persistence error: ", err);
    });

  // Products Data
  const products = [
    {
      id: 1,
      name: "Galaxy Night Light with Bluetooth Speaker",
      price: 1250,
      description: "3-in-1 projector with stars, ocean waves & Bluetooth music. Features 21 color effects, remote control, sound activation & timer perfect for dreamy nights and parties.",
      images: [
        "https://i.ibb.co/n5jMFhj/B-1.jpg",
        "https://i.ibb.co/gMddczvt/B-2.jpg",
        "https://i.ibb.co/67KCV9gq/B-3.jpg",
        "https://i.ibb.co/C5HnbD2c/B-4.jpg",
        "https://i.ibb.co/RGWWLZpm/B-5.jpg",
      ],
    },
    // ... (keep your other products as they were)
  ];

  // DOM Elements and other variables remain the same
  // ... (keep all your existing DOM element declarations)

  // Cart State
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  // Format price function
  function formatPrice(price) {
    return price.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + 'à§³';
  }

  // Display Products (keep your existing displayProducts function)

  // Show Product Modal (keep your existing showProductModal function)

  // Add to Cart (keep your existing addToCart function)

  // Update Cart (keep your existing updateCart function)

  // Render Cart Items (keep your existing renderCartItems function)

  // Update Quantity (keep your existing updateQuantity function)

  // Remove from Cart (keep your existing removeFromCart function)

  // Checkout (keep your existing checkout function)

  // Submit Order - UPDATED with better error handling
  function submitOrder(e) {
    e.preventDefault();

    const name = document.getElementById("name").value;
    const address = document.getElementById("address").value;
    const phone = document.getElementById("phone").value;
    const payment = document.querySelector('input[name="payment"]:checked').value;

    const order = {
      id: Date.now().toString(),
      date: new Date().toISOString(),
      customer: { name, address, phone },
      payment,
      items: [...cart],
      total: cart.reduce((total, item) => total + item.price * item.quantity, 0),
      status: "pending"
    };

    console.log("Submitting order:", order);

    // Add order to Firestore
    db.collection("orders").doc(order.id).set(order)
      .then(() => {
        console.log("Order successfully written to Firestore!");
        
        // Also save to localStorage for immediate UI update
        const orders = JSON.parse(localStorage.getItem("orders")) || [];
        orders.push(order);
        localStorage.setItem("orders", JSON.stringify(orders));

        // Clear cart
        cart = [];
        updateCart();

        // Show confirmation
        checkoutBody.style.display = "none";
        orderConfirmation.style.display = "block";
        
        // Track conversion
        analytics.logEvent('purchase', {
          transaction_id: order.id,
          value: order.total,
          currency: 'BDT'
        });
      })
      .catch((error) => {
        console.error("Error writing order to Firestore: ", error);
        alert("Order submission failed. Please check console for details.");
      });
  }

  // Admin Login (keep your existing adminLogin function)

  // Show Admin Dashboard - UPDATED to use Firestore
  function showAdminDashboard() {
    ordersTableContainer.innerHTML = '<p>Loading orders...</p>';
    
    db.collection("orders").orderBy("date", "desc").get()
      .then((querySnapshot) => {
        const orders = [];
        querySnapshot.forEach((doc) => {
          orders.push(doc.data());
        });
        
        renderOrdersTable(orders);
        
        // Also update localStorage
        localStorage.setItem("orders", JSON.stringify(orders));
      })
      .catch((error) => {
        console.error("Error getting orders: ", error);
        // Fallback to localStorage if Firestore fails
        const localOrders = JSON.parse(localStorage.getItem("orders")) || [];
        if (localOrders.length > 0) {
          renderOrdersTable(localOrders);
          alert("Showing cached orders. Could not connect to Firestore.");
        } else {
          ordersTableContainer.innerHTML = 
            '<div class="no-orders">Error loading orders. Please check console.</div>';
        }
      });
  }

  // Render Orders Table (keep your existing renderOrdersTable function)

  // Event Listeners (keep all your existing event listeners)

  // Initialize
  displayProducts();
  updateCart();

  // Debugging
  console.log("Firebase initialized:", firebase.app().name);
  console.log("Firestore instance:", db);
</script>
    <script>
      // Firebase Configuration and Initialization
      const firebaseConfig = {
        apiKey: "AIzaSyAK52h7QPfh7Y3UTBxwnsBKrB-EG6fhvA0",
        authDomain: "chorki-16848.firebaseapp.com",
        projectId: "chorki-16848",
        storageBucket: "chorki-16848.firebasestorage.app",
        messagingSenderId: "975672326438",
        appId: "1:975672326438:web:56c332d14ab8f7315729e7",
        measurementId: "G-MYDLZW1JG8"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const analytics = firebase.analytics();
      const db = firebase.firestore();

      // Products Data
      const products = [
        {
          id: 1,
          name: "Galaxy Night Light with Bluetooth Speaker",
          price: 1250,
          description:
            "3-in-1 projector with stars, ocean waves & Bluetooth music. Features 21 color effects, remote control, sound activation & timer perfect for dreamy nights and parties.",
          images: [
            "https://i.ibb.co/n5jMFhj/B-1.jpg",
            "https://i.ibb.co/gMddczvt/B-2.jpg",
            "https://i.ibb.co/67KCV9gq/B-3.jpg",
            "https://i.ibb.co/C5HnbD2c/B-4.jpg",
            "https://i.ibb.co/RGWWLZpm/B-5.jpg",
          ],
        },
        {
          id: 2,
          name: "Oval Shape Crystal Night Touch Lamp (Rechargeable, AC/DC)",
          price: 1150,
          description:
            "Stylish oval lamp with 3 soothing LED colors, touch control, USB rechargeable â€“ perfect for mood lighting, reading, or gifting. Adjustable brightness for any setting.",
          images: [
            "https://i.ibb.co/HLQkbTGD/A-1.jpg",
            "https://i.ibb.co/v49rSgJQ/A-2.jpg",
            "https://i.ibb.co/twBfdFFt/A-3.jpg",
            "https://i.ibb.co/1fWHGQRZ/A-4.jpg",
            "https://i.ibb.co/M5sZwQQZ/A-5.jpg",
            "https://i.ibb.co/BVXNrYW5/A-6.jpg",
            "https://i.ibb.co/4nsFtjfJ/A-7.jpg",
            "https://i.ibb.co/WNVDPMS2/A-8.jpg",
          ],
        },
        {
          id: 3,
          name: "16 Colors Rose Diamond Table Lamp (Touch/Remote, AC/DC)",
          price: 980,
          description:
            "Elegant acrylic lamp with 16 color modes, touch & remote control, USB-C rechargeable â€“ perfect for mood lighting, decoration, or a romantic gift.",
          images: [
            "https://i.ibb.co/V0JVPcVf/C-1.jpg",
            "https://i.ibb.co/KctgsnbV/C-2.jpg",
            "https://i.ibb.co/4ZS1RXGd/C-3.jpg",
            "https://i.ibb.co/tw6HDmKk/C-4.jpg",
            "https://i.ibb.co/hRqrMybp/C-5.jpg",
            "https://i.ibb.co/R4dbZyM4/C-6.jpg",
            "https://i.ibb.co/SXVGcCnB/C-7.jpg",
          ],
        },
      ];

      // DOM Elements
      const productsGrid = document.getElementById("productsGrid");
      const productModal = document.getElementById("productModal");
      const modalBody = document.getElementById("modalBody");
      const closeModal = document.getElementById("closeModal");
      const cartModal = document.getElementById("cartModal");
      const cartItems = document.getElementById("cartItems");
      const cartTotal = document.getElementById("cartTotal");
      const cartCount = document.getElementById("cartCount");
      const closeCart = document.getElementById("closeCart");
      const cartIcon = document.getElementById("cartIcon");
      const btnCheckout = document.getElementById("btnCheckout");
      const checkoutForm = document.getElementById("checkoutForm");
      const closeCheckout = document.getElementById("closeCheckout");
      const checkoutBody = document.getElementById("checkoutBody");
      const orderForm = document.getElementById("orderForm");
      const orderConfirmation = document.getElementById("orderConfirmation");
      const continueShopping = document.getElementById("continueShopping");
      const adminLoginBtn = document.getElementById("adminLoginBtn");
      const adminLoginModal = document.getElementById("adminLoginModal");
      const closeAdminLogin = document.getElementById("closeAdminLogin");
      const adminLoginForm = document.getElementById("adminLoginForm");
      const adminDashboard = document.getElementById("adminDashboard");
      const closeAdminDashboard = document.getElementById(
        "closeAdminDashboard"
      );
      const ordersTableContainer = document.getElementById(
        "ordersTableContainer"
      );

      // Cart State
      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      // Display Products
      function formatPrice(price) {
          return price.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + 'à§³';
      }

      function displayProducts() {
        productsGrid.innerHTML = "";
        products.forEach((product) => {
          const productCard = document.createElement("div");
          productCard.className = "product-card";
          productCard.innerHTML = `
                    <div class="product-image">
                        <img src="${product.images[0]}" alt="${product.name}">
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <p class="product-price">${formatPrice(product.price)}</p>
                        <p class="product-description">${product.description.substring(
                          0,
                          100
                        )}...</p>
                        <button class="btn-view" data-id="${
                          product.id
                        }">View Details</button>
                    </div>
                `;
          productsGrid.appendChild(productCard);
        });

        // Add event listeners to view buttons
        document.querySelectorAll(".btn-view").forEach((button) => {
          button.addEventListener("click", (e) => {
            const productId = parseInt(e.target.getAttribute("data-id"));
            const product = products.find((p) => p.id === productId);
            if (product) {
              showProductModal(product);
            }
          });
        });
      }

      // Show Product Modal
      function showProductModal(product) {
        modalBody.innerHTML = `
                <div class="product-slider">
                    <div class="slider-container" id="sliderContainer">
                        ${product.images
                          .map(
                            (img) =>
                              `<img src="${img}" class="slider-image" alt="${product.name}">`
                          )
                          .join("")}
                    </div>
                    <div class="slider-nav" id="sliderNav">
                        ${product.images
                          .map(
                            (_, index) =>
                              `<div class="slider-dot ${
                                index === 0 ? "active" : ""
                              }" data-index="${index}"></div>`
                          )
                          .join("")}
                    </div>
                </div>
                <div class="modal-product-info">
                    <h3 class="modal-product-name">${product.name}</h3>
                    <p class="modal-product-price">${formatPrice(product.price)}</p>
                    <p class="modal-product-description">${
                      product.description
                    }</p>
                </div>
                <button class="btn-add-to-cart" data-id="${
                  product.id
                }">Add to Cart</button>
            `;

        // Initialize slider
        const sliderContainer = document.getElementById("sliderContainer");
        const sliderNav = document.getElementById("sliderNav");
        const sliderDots = document.querySelectorAll(".slider-dot");
        let currentSlide = 0;
        const slideCount = product.images.length;

        function goToSlide(index) {
          sliderContainer.style.transform = `translateX(-${index * 100}%)`;
          sliderDots.forEach((dot) => dot.classList.remove("active"));
          sliderDots[index].classList.add("active");
          currentSlide = index;
        }

        sliderDots.forEach((dot) => {
          dot.addEventListener("click", () => {
            const index = parseInt(dot.getAttribute("data-index"));
            goToSlide(index);
          });
        });

        // Add to cart button
        document
          .querySelector(".btn-add-to-cart")
          .addEventListener("click", () => {
            addToCart(product);
            productModal.style.display = "none";
          });

        productModal.style.display = "block";
      }

      // Add to Cart
      function addToCart(product) {
        const existingItem = cart.find((item) => item.id === product.id);

        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({
            id: product.id,
            name: product.name,
            price: product.price,
            image: product.images[0],
            quantity: 1,
          });
        }

        updateCart();
      }

      // Update Cart
      function updateCart() {
        // Save to localStorage
        localStorage.setItem("cart", JSON.stringify(cart));

        // Update cart count
        const totalItems = cart.reduce(
          (total, item) => total + item.quantity,
          0
        );
        cartCount.textContent = totalItems;

        // Update cart modal if open
        if (cartModal.style.display === "block") {
          renderCartItems();
        }
      }

      // Render Cart Items
      function renderCartItems() {
        cartItems.innerHTML = "";

        if (cart.length === 0) {
          cartItems.innerHTML = "<p>Your cart is empty</p>";
          cartTotal.textContent = "$0.00";
          btnCheckout.disabled = true;
          return;
        }

        btnCheckout.disabled = false;

        let total = 0;

        cart.forEach((item) => {
          const itemTotal = item.price * item.quantity;
          total += itemTotal;

          const cartItem = document.createElement("div");
          cartItem.className = "cart-item";
          cartItem.innerHTML = `
                    <img src="${item.image}" class="cart-item-image" alt="${
            item.name
          }">
                    <div class="cart-item-details">
                        <h4 class="cart-item-name">${item.name}</h4>
                        <p class="cart-item-price">${formatPrice(item.price)}</p>s
                        <div class="cart-item-quantity">
                            <button class="quantity-btn minus" data-id="${
                              item.id
                            }">-</button>
                            <input type="number" class="quantity-input" value="${
                              item.quantity
                            }" min="1" data-id="${item.id}">
                            <button class="quantity-btn plus" data-id="${
                              item.id
                            }">+</button>
                        </div>
                        <p class="remove-item" data-id="${item.id}">Remove</p>
                    </div>
                `;
          cartItems.appendChild(cartItem);
        });

        cartTotal.textContent = formatPrice(total);

        // Add event listeners to quantity buttons
        document.querySelectorAll(".quantity-btn.minus").forEach((button) => {
          button.addEventListener("click", (e) => {
            const id = parseInt(e.target.getAttribute("data-id"));
            updateQuantity(id, -1);
          });
        });

        document.querySelectorAll(".quantity-btn.plus").forEach((button) => {
          button.addEventListener("click", (e) => {
            const id = parseInt(e.target.getAttribute("data-id"));
            updateQuantity(id, 1);
          });
        });

        document.querySelectorAll(".quantity-input").forEach((input) => {
          input.addEventListener("change", (e) => {
            const id = parseInt(e.target.getAttribute("data-id"));
            const newQuantity = parseInt(e.target.value);

            if (newQuantity >= 1) {
              const item = cart.find((item) => item.id === id);
              if (item) {
                item.quantity = newQuantity;
                updateCart();
              }
            }
          });
        });

        document.querySelectorAll(".remove-item").forEach((button) => {
          button.addEventListener("click", (e) => {
            const id = parseInt(e.target.getAttribute("data-id"));
            removeFromCart(id);
          });
        });
      }

      // Update Quantity
      function updateQuantity(id, change) {
        const item = cart.find((item) => item.id === id);
        if (item) {
          item.quantity += change;

          if (item.quantity < 1) {
            removeFromCart(id);
          } else {
            updateCart();
          }
        }
      }

      // Remove from Cart
      function removeFromCart(id) {
        cart = cart.filter((item) => item.id !== id);
        updateCart();
      }

      // Checkout
      function checkout() {
        checkoutBody.style.display = "block";
        orderConfirmation.style.display = "none";
        checkoutForm.style.display = "block";
      }

      // Submit Order
      function submitOrder(e) {
        e.preventDefault();

        const name = document.getElementById("name").value;
        const address = document.getElementById("address").value;
        const phone = document.getElementById("phone").value;
        const payment = document.querySelector(
          'input[name="payment"]:checked'
        ).value;

        const order = {
          id: Date.now(),
          date: new Date().toLocaleString(),
          customer: { name, address, phone },
          payment,
          items: [...cart],
          total: cart.reduce(
            (total, item) => total + item.price * item.quantity,
            0
          ),
        };

        // Save order to Firebase
        db.collection("orders").add(order)
          .then(() => {
            // Also save to localStorage for immediate UI update
            const orders = JSON.parse(localStorage.getItem("orders")) || [];
            orders.push(order);
            localStorage.setItem("orders", JSON.stringify(orders));

            // Clear cart
            cart = [];
            updateCart();

            // Show confirmation
            checkoutBody.style.display = "none";
            orderConfirmation.style.display = "block";
          })
          .catch((error) => {
            console.error("Error adding order: ", error);
            alert("There was an error processing your order. Please try again.");
          });
      }

      // Admin Login
      function adminLogin(e) {
        e.preventDefault();

        const username = document.getElementById("adminUsername").value;
        const password = document.getElementById("adminPassword").value;

        if (username === "admin" && password === "admin") {
          adminLoginModal.style.display = "none";
          showAdminDashboard();
        } else {
          alert("Invalid credentials. Please try again.");
        }
      }

      // Show Admin Dashboard
      function showAdminDashboard() {
        // First check localStorage for immediate display
        const localOrders = JSON.parse(localStorage.getItem("orders")) || [];
        
        if (localOrders.length > 0) {
          renderOrdersTable(localOrders);
        }

        // Then fetch from Firebase for the most up-to-date data
        db.collection("orders").get()
          .then((querySnapshot) => {
            const firebaseOrders = [];
            querySnapshot.forEach((doc) => {
              firebaseOrders.push(doc.data());
            });
            
            // Update localStorage with Firebase data
            localStorage.setItem("orders", JSON.stringify(firebaseOrders));
            
            // Render the table (will show Firebase data if available)
            if (firebaseOrders.length > 0 || localOrders.length === 0) {
              renderOrdersTable(firebaseOrders);
            }
          })
          .catch((error) => {
            console.error("Error getting orders: ", error);
            // If Firebase fails, just show the localStorage data
            if (localOrders.length === 0) {
              ordersTableContainer.innerHTML =
                '<div class="no-orders">No orders found</div>';
            }
          });
      }

      // Render Orders Table
      function renderOrdersTable(orders) {
        if (orders.length === 0) {
          ordersTableContainer.innerHTML =
            '<div class="no-orders">No orders found</div>';
        } else {
          let tableHTML = `
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Date</th>
                                <th>Customer</th>
                                <th>Items</th>
                                <th>Total</th>
                                <th>Payment</th>
                            </tr>
                        </thead>
                        <tbody>
                `;

          orders.forEach((order) => {
            tableHTML += `
                        <tr>
                            <td>${order.id}</td>
                            <td>${order.date}</td>
                            <td>
                                ${order.customer.name}<br>
                                ${order.customer.address}<br>
                                ${order.customer.phone}
                            </td>
                            <td>
                                ${order.items
                                  .map(
                                    (item) => `${item.name} (${item.quantity})`
                                  )
                                  .join("<br>")}
                            </td>
                            <td>${formatPrice(order.total)}</td>
                            <td>${order.payment}</td>
                        </tr>
                    `;
          });

          tableHTML += `
                        </tbody>
                    </table>
                `;

          ordersTableContainer.innerHTML = tableHTML;
        }

        adminDashboard.style.display = "block";
      }

      // Event Listeners
      closeModal.addEventListener("click", () => {
        productModal.style.display = "none";
      });

      cartIcon.addEventListener("click", () => {
        renderCartItems();
        cartModal.style.display = "block";
      });

      closeCart.addEventListener("click", () => {
        cartModal.style.display = "none";
      });

      btnCheckout.addEventListener("click", checkout);

      closeCheckout.addEventListener("click", () => {
        checkoutForm.style.display = "none";
      });

      orderForm.addEventListener("submit", submitOrder);

      continueShopping.addEventListener("click", () => {
        checkoutForm.style.display = "none";
        cartModal.style.display = "none";
      });

      adminLoginBtn.addEventListener("click", () => {
        adminLoginModal.style.display = "block";
      });

      closeAdminLogin.addEventListener("click", () => {
        adminLoginModal.style.display = "none";
      });

      adminLoginForm.addEventListener("submit", adminLogin);

      closeAdminDashboard.addEventListener("click", () => {
        adminDashboard.style.display = "none";
      });

      // Close modals when clicking outside
      window.addEventListener("click", (e) => {
        if (e.target === productModal) {
          productModal.style.display = "none";
        }
        if (e.target === cartModal) {
          cartModal.style.display = "none";
        }
        if (e.target === checkoutForm) {
          checkoutForm.style.display = "none";
        }
        if (e.target === adminLoginModal) {
          adminLoginModal.style.display = "none";
        }
      });

      // Initialize
      displayProducts();
      updateCart();
    </script>
  </body>
</html>
